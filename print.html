<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>rosetta-iota</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="pages/welcome.html"><strong aria-hidden="true">1.</strong> Welcome</a></li><li class="chapter-item expanded "><a href="pages/relation.html"><strong aria-hidden="true">2.</strong> Relation between IOTA and Rosetta</a></li><li class="chapter-item expanded "><a href="pages/deployment.html"><strong aria-hidden="true">3.</strong> Deployment</a></li><li class="chapter-item expanded "><a href="pages/testing.html"><strong aria-hidden="true">4.</strong> Testing</a></li><li class="chapter-item expanded "><a href="pages/api_reference.html"><strong aria-hidden="true">5.</strong> API Reference</a></li><li class="chapter-item expanded "><a href="pages/utils.html"><strong aria-hidden="true">6.</strong> Utils</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">rosetta-iota</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        <a href="https://github.com/iotaledger/rosetta-iota" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="welcome-to-the-documentation-for-rosetta-iota--"><a class="header" href="#welcome-to-the-documentation-for-rosetta-iota--">Welcome to the documentation for rosetta-iota  ðŸ“–</a></h1>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p><code>rosetta-iota</code> provides a reference implementation of the Rosetta API for IOTA in Rust. If you haven't heard of the Rosetta API, you can find more information <a href="https://www.rosetta-api.org/">here</a>.</p>
<h2 id="features"><a class="header" href="#features">Features</a></h2>
<ul>
<li>Implementation of both Data API and Construction API</li>
<li>Stateless, offline, curve-based transaction construction</li>
<li><a href="https://www.rosetta-api.org/docs/storage_pruning.html#docsNav">Storage Pruning</a> using a block height-based configuration setting</li>
</ul>
<h2 id="license"><a class="header" href="#license">License</a></h2>
<p><code>rosetta-iota</code> is released under the Apache License 2.0.</p>
<h1 id="relation-between-iota-and-rosetta"><a class="header" href="#relation-between-iota-and-rosetta">Relation between IOTA and Rosetta</a></h1>
<p>The IOTA protocol differs from most DLT technologies in the sense that it uses a directed acyclic graph (DAG) data structure that allows transactions to be added in parallel.</p>
<h2 id="blocks-and-milestones"><a class="header" href="#blocks-and-milestones">Blocks and Milestones</a></h2>
<p>IOTA has the concept of Milestones as the closest analogy for Blocks. Periodically, an authorized entity issues a milestone (imagine as checkpoint) to the network to settle the ledger state.</p>
<h2 id="messages-and-transactions"><a class="header" href="#messages-and-transactions">Messages and Transactions</a></h2>
<p>IOTA nodes gossip &quot;messages&quot;. A message is an envelope that may contain a payload. You can find more information about the message format <a href="https://github.com/GalRogozinski/protocol-rfcs/blob/message/text/0017-message/0017-message.md">here</a>. There are different types of payloads for different purposes. To transfer value, a &quot;transaction payload&quot; will be used.
Furthermore, transactions of funds are carried out in <strong>UTXO</strong> style. To learn more about the transaction payload click <a href="https://github.com/luca-moser/protocol-rfcs/blob/signed-tx-payload/text/0000-transaction-payload/0000-transaction-payload.md">here</a>.</p>
<h1 id="design-choices"><a class="header" href="#design-choices">Design choices</a></h1>
<p>Here we describe how concepts from the IOTA protocol were adapted for the Rosetta Endpoints.</p>
<h2 id="genesis-milestone"><a class="header" href="#genesis-milestone">Genesis Milestone</a></h2>
<p>Per default, the genesis milestone is not available on full-nodes, but the <code>/network/status</code> endpoint response contains a required <code>genesis_block_identifier</code> field. The <code>genesis_block_identifier</code> is populated as such:</p>
<pre><code>&quot;genesis_block_identifier&quot;: {
  &quot;index&quot;: 1,
  &quot;hash&quot;: &quot;0000000000000000000000000000000000000000000000000000000000000000&quot;
}
</code></pre>
<p>Technically speaking, that is not accurate, as the genesis milestone identifier is not a series of <code>0</code>s. However, a dummy value is used as a compromise in order not to render the <code>/network/status</code> endpoint unavailable. </p>
<p>Syncing <code>rosetta-cli</code> is also affected by this. Syncing from genesis is only possible with a Permanode, as well. Otherwise, the <code>test.sh</code> shows how to use the Fullnode's <code>pruningIndex</code> as the <code>start_index</code> for the configuration <code>JSON</code>.</p>
<h2 id="transactions-and-operations"><a class="header" href="#transactions-and-operations">Transactions and Operations</a></h2>
<p>The <code>/block</code> endpoint responds with information about balance changing Transactions that happened on a specific Milestone.
That is achieved via the <code>/api/v1/milestones/:milestoneId/utxo-changes</code> IOTA Fullnode endpoint, where a list of <strong>Created</strong> and <strong>Consumed</strong> UTXO Outputs is returned.</p>
<p>Each UTXO Output contains a <code>output_id</code>, a <code>transaction_id</code> and a <code>output_index</code>, where <code>output_id = transaction_id + output_index</code>.</p>
<p>In terms of Rosetta Models, the <code>TransactionIdentifier</code> of a <code>Transaction</code> Object is defined by an IOTA <code>transaction_id</code>.</p>
<p>Each <a href="https://www.rosetta-api.org/docs/models/Transaction.html">Transaction</a> Object has an array of <a href="https://www.rosetta-api.org/docs/models/Operation.html">Operations</a>, each one representing a UTXO Output.</p>
<p>The <code>UTXO Operation</code> <code>operation_identifier</code> Object (<a href="https://www.rosetta-api.org/docs/models/OperationIdentifier.html">OperationIdentifier</a> type) is defined as:</p>
<ul>
<li><code>index</code>: incremented from <code>0</code> for each <code>Operation</code> Object in the <code>Transaction</code></li>
<li><code>network_index</code>: <code>output_index</code></li>
</ul>
<p>The <code>UTXO Operation</code> <code>type</code> field can be either:</p>
<ul>
<li><code>&quot;UTXO_INPUT&quot;</code>, which describes the funds to spend</li>
<li><code>&quot;UTXO_OUTPUT&quot;</code>, which describes where the funds should be transfered to</li>
</ul>
<p>The <code>UTXO Operation</code> <code>status</code> field is defined as:</p>
<ul>
<li><code>&quot;SUCCESS&quot;</code>, meaning that the transaction was included in the ledger.</li>
<li><code>&quot;SKIPPED&quot;</code>, meaning that the UTXO Output has not been included in the ledger (e.g. already spent by another Transaction).</li>
</ul>
<p>Note, that the status field will not get populated when constructing a transaction by the Construction API.</p>
<p>The <code>UTXO Operation</code> <code>account</code> field is defined as the <code>address</code> value from the UTXO.</p>
<p>The <code>UTXO Operation</code> <code>coin_change</code> Object (<a href="https://www.rosetta-api.org/docs/models/CoinChange.html">CoinChange</a> type) is defined as:</p>
<ul>
<li><code>coin_identifier</code>: <code>output_id</code></li>
<li><code>coin_action</code>: either
<ul>
<li><code>&quot;coin_spent&quot;</code>, where coins are coming from into the Transaction</li>
<li><code>&quot;coin_created&quot;</code>, where coins are going out from the Transaction</li>
</ul>
</li>
</ul>
<p><strong>Note:</strong> Rosetta's definition of <a href="https://www.rosetta-api.org/docs/models/CoinAction.html">CoinAction</a> is an <code>enum</code> valued with <code>&quot;coin_spent&quot;</code> and <code>&quot;coin_created&quot;</code>. These terms are analogous to IOTA's <code>&quot;UTXO_CONSUMED&quot;</code> and <code>&quot;UTXO_CREATED&quot;</code>, and <strong>must not be confused</strong> with IOTA's <code>&quot;UTXO_SPENT&quot;</code> and <code>&quot;UTXO_UNSPENT&quot;</code>.</p>
<p>Here's an example of two Transaction Objects in the same Milestone:</p>
<pre><code>{
  &quot;transactions&quot;: [
    {
      &quot;transaction_identifier&quot;: {
        &quot;hash&quot;: &quot;586d11477a48a25b4a554686ce8d6cf711be3a85cf07a0dc2d07d4e0f4c03636&quot;
      },
      &quot;operations&quot;: [
        {
          &quot;operation_identifier&quot;: {
            &quot;index&quot;: 0,
            &quot;network_index&quot;: 2
          },
          &quot;type&quot;: &quot;UTXO_INPUT&quot;,
          &quot;status&quot;: &quot;SUCCESS&quot;,
          &quot;account&quot;: {
            &quot;address&quot;: &quot;atoi1q8k69lxuxljdgeqt7tucvtdfk3hrvrly7rzz65w57te6drf3expsjth4u2j&quot;
          },
          &quot;amount&quot;: {
            &quot;value&quot;: &quot;-20000000&quot;,
            &quot;currency&quot;: {
              &quot;symbol&quot;: &quot;IOTA&quot;,
              &quot;decimals&quot;: 0
            }
          },
          &quot;coin_change&quot;: {
            &quot;coin_identifier&quot;: {
              &quot;identifier&quot;: &quot;9ce415875aa9ed67c4a3b97cb598861be11444e880fad604ec2a96ee65590da80000&quot;
            },
            &quot;coin_action&quot;: &quot;coin_spent&quot;
          },
          &quot;metadata&quot;: {
            &quot;is_spent&quot;: &quot;UTXO_UNSPENT&quot;
          }
        },
        {
          &quot;operation_identifier&quot;: {
            &quot;index&quot;: 1,
            &quot;network_index&quot;: 0
          },
          &quot;type&quot;: &quot;UTXO_INPUT&quot;,
          &quot;status&quot;: &quot;SUCCESS&quot;,
          &quot;account&quot;: {
            &quot;address&quot;: &quot;atoi1q86v9cgc8d9ue9nd9k4z8rp2dn29mcwf2y9jhm59u8dg25aukhq3jqwwfvf&quot;
          },
          &quot;amount&quot;: {
            &quot;value&quot;: &quot;-10000000&quot;,
            &quot;currency&quot;: {
              &quot;symbol&quot;: &quot;IOTA&quot;,
              &quot;decimals&quot;: 0
            }
          },
          &quot;coin_change&quot;: {
            &quot;coin_identifier&quot;: {
              &quot;identifier&quot;: &quot;586d11477a48a25b4a554686ce8d6cf711be3a85cf07a0dc2d07d4e0f4c036360100&quot;
            },
            &quot;coin_action&quot;: &quot;coin_spent&quot;
          },
          &quot;metadata&quot;: {
            &quot;is_spent&quot;: &quot;UTXO_UNSPENT&quot;
          }
        },
        {
          &quot;operation_identifier&quot;: {
            &quot;index&quot;: 2,
            &quot;network_index&quot;: 0
          },
          &quot;type&quot;: &quot;UTXO_OUTPUT&quot;,
          &quot;status&quot;: &quot;SUCCESS&quot;,
          &quot;account&quot;: {
            &quot;address&quot;: &quot;atoi1q8k69lxuxljdgeqt7tucvtdfk3hrvrly7rzz65w57te6drf3expsjth4u2j&quot;
          },
          &quot;amount&quot;: {
            &quot;value&quot;: &quot;30000000&quot;,
            &quot;currency&quot;: {
              &quot;symbol&quot;: &quot;IOTA&quot;,
              &quot;decimals&quot;: 0
            }
          },
          &quot;coin_change&quot;: {
            &quot;coin_identifier&quot;: {
              &quot;identifier&quot;: &quot;9ce415875aa9ed67c4a3b97cb598861be11444e880fad604ec2a96ee65590da80000&quot;
            },
            &quot;coin_action&quot;: &quot;coin_created&quot;
          },
          &quot;metadata&quot;: {
            &quot;is_spent&quot;: &quot;UTXO_SPENT&quot;
          }
        }
      ]
    }
  ]
}
</code></pre>
<h2 id="iota-nodes"><a class="header" href="#iota-nodes">IOTA nodes</a></h2>
<p><strong>IOTA full-nodes</strong> (such as <a href="https://github.com/gohornet/hornet.git">HORNET</a> and <a href="https://github.com/iotaledger/bee.git">Bee</a>) are able to start up from a recent block instead of having to synchronize from genesis. This can be achieved by bootstrapping the node with recent <a href="https://github.com/luca-moser/protocol-rfcs/blob/local-snapshot-file-format/text/0000-local-snapshot-file-format/0000-local-snapshot-file-format.md">snapshots</a>. 
Also, IOTA full-nodes are able to prune history from time to time in a safe way.
<strong>IOTA full-nodes per default don't hold the entire Tangle history - they are not designed for it.</strong></p>
<p>Only <strong>IOTA Permanodes</strong> (such as <a href="https://github.com/iotaledger/chronicle.rs/tree/main/chronicle-node">Chronicle</a>) <strong>are designed to hold the entire Tangle history.</strong></p>
<p><code>rosetta-iota</code> aims for a more reliable integration and better performance with limiting state storage. For these reasons <strong>the Rosetta API implementation will be deployed with an IOTA full-node</strong> (<a href="https://github.com/gohornet/hornet.git">HORNET</a>).</p>
<h2 id="testnet-deployment"><a class="header" href="#testnet-deployment">Testnet deployment</a></h2>
<ol>
<li>
<p>Ensure <code>docker</code> and <code>docker-compose</code> are installed.</p>
</li>
<li>
<p>Download the latest release of <code>rosetta-iota</code> and extract the files in a folder of your choice.</p>
</li>
<li>
<p>Add peers for the HORNET node to the <code>hornet/peering.json</code> file.</p>
</li>
<li>
<p><strong>Run following commands to start a HORNET node together with a Rosetta API instance:</strong></p>
<p><strong>Testnet:Online</strong></p>
<pre><code>NETWORK=testnet7 BECH32_HRP=atoi TX_TAG=Rosetta MODE=online docker-compose up
</code></pre>
<p><strong>Testnet:Offline</strong></p>
<pre><code>NETWORK=testnet7 BECH32_HRP=atoi TX_TAG=Rosetta MODE=offline docker-compose up
</code></pre>
</li>
</ol>
<p>Once the HORNET node has synced with the network, the Rosetta API will be available at: http://localhost:3030</p>
<p>The HORNET node will be bootstrapped automatically with a recent snapshot to start synchronizing from a recent block. The snapshot will be automatically downloaded from https://dbfiles.testnet.chrysalis2.com. <strong>If you want to bootstrap the HORNET node yourself with some custom snapshots, you can put them in the <code>data/snapshots/</code> directory.</strong></p>
<h1 id="testing-with-rosetta-cli"><a class="header" href="#testing-with-rosetta-cli">Testing with rosetta-cli</a></h1>
<p>Make sure you have installed following dependencies:</p>
<pre><code>$ sudo apt-get install sed jq psmisc
</code></pre>
<p>Ensure the IOTA node is running and an instance of the Rosetta API is available.
To validate the correctness of <code>rosetta-iota</code> run the commands below:</p>
<p>Testing the Data API <strong>(Testnet)</strong>:</p>
<pre><code>ROSETTA_CLI_INSTALL=1 BOOTSTRAP_BALANCES=1 NODE_URL=http://localhost:14265 ./check_data_testnet.sh
</code></pre>
<p>Testing the Construction API <strong>(Testnet)</strong>:</p>
<pre><code>ROSETTA_CLI_INSTALL=1 BOOTSTRAP_BALANCES=1 NODE_URL=http://localhost:14265 ./check_construction_testnet.sh
</code></pre>
<p>The script uses the following shell variables:</p>
<ul>
<li><code>ROSETTA_CLI_INSTALL=1</code> ...installs rosetta-cli</li>
<li><code>BOOTSTRAP_BALANCES=1</code> ...deletes the rosetta-cli storage, downloads the latest available IOTA snapshot and bootstraps balances</li>
<li><code>NODE_URL=1</code> ...the local</li>
<li><code>NO_BOOTSTRAP=1</code> ...keeps the rosetta-cli storage</li>
</ul>
<h2 id="testing-with-curl"><a class="header" href="#testing-with-curl">Testing with curl</a></h2>
<p>Curl commands can also be used for manual inspection of each API endpoint.</p>
<ol>
<li>Kickstart a <code>rosetta-iota</code> server:</li>
</ol>
<pre><code>$ cargo run -- --iota-endpoint http://0.0.0.0:14265 --network testnet6 --bech32-hrp atoi --indexation rosetta --port 3030 --mode online
</code></pre>
<ol start="2">
<li>From a new terminal, you can test each endpoint via <code>curl</code>:</li>
</ol>
<ul>
<li><code>/network/list</code></li>
</ul>
<pre><code>$ curl --request POST 'http://localhost:3030/network/list' \--header 'Accept: application/json' \--header 'Content-Type: application/json' \--data-raw '{&quot;metadata&quot;:{}}' | jq
</code></pre>
<ul>
<li><code>/network/status</code></li>
</ul>
<pre><code>$ curl --request POST 'http://localhost:3030/network/status' \--header 'Accept: application/json' \--header 'Content-Type: application/json' \--data-raw '{&quot;network_identifier&quot;:{&quot;blockchain&quot;:&quot;iota&quot;,&quot;network&quot;:&quot;testnet6&quot;}}' | jq
</code></pre>
<ul>
<li><code>/network/options</code></li>
</ul>
<pre><code>$ curl --request POST 'http://localhost:3030/network/options' \--header 'Accept: application/json' \--header 'Content-Type: application/json' \--data-raw '{&quot;network_identifier&quot;:{&quot;blockchain&quot;:&quot;iota&quot;,&quot;network&quot;:&quot;testnet6&quot;}}' | jq
</code></pre>
<ul>
<li><code>/block</code></li>
</ul>
<pre><code>$ curl --request POST 'http://localhost:3030/block' \--header 'Accept: application/json' \--header 'Content-Type: application/json' \--data-raw '{&quot;network_identifier&quot;:{&quot;blockchain&quot;:&quot;iota&quot;,&quot;network&quot;:&quot;testnet6&quot;},&quot;block_identifier&quot;:{&quot;index&quot;:2,&quot;hash&quot;:&quot;&quot;}}' | jq
</code></pre>
<ul>
<li><code>/account/balance</code></li>
</ul>
<pre><code>$ curl --request POST 'http://localhost:3030/account/balance' \--header 'Accept: application/json' \--header 'Content-Type: application/json' \--data-raw '{&quot;network_identifier&quot;:{&quot;blockchain&quot;:&quot;iota&quot;,&quot;network&quot;:&quot;testnet6&quot;},&quot;account_identifier&quot;:{&quot;address&quot;:&quot;atoi1qx0pteshrd554xtea4v3rklr97kzgc95umcpckn9pl897gnedk7gugyk5ld&quot;}}' | jq
</code></pre>
<ul>
<li><code>/account/coins</code></li>
</ul>
<pre><code>$ curl --request POST 'http://localhost:3030/account/coins' \--header 'Accept: application/json' \--header 'Content-Type: application/json' \--data-raw '{&quot;network_identifier&quot;:{&quot;blockchain&quot;:&quot;iota&quot;,&quot;network&quot;:&quot;testnet6&quot;},&quot;account_identifier&quot;:{&quot;address&quot;:&quot;atoi1qx0pteshrd554xtea4v3rklr97kzgc95umcpckn9pl897gnedk7gugyk5ld&quot;}}' | jq
</code></pre>
<ul>
<li><code>/construction/derive</code> (<code>offline</code> mode only)</li>
</ul>
<pre><code>$ curl --request POST 'http://localhost:3030/construction/derive' \--header 'Accept: application/json' \--header 'Content-Type: application/json' \--data-raw '{&quot;network_identifier&quot;:{&quot;blockchain&quot;:&quot;iota&quot;,&quot;network&quot;:&quot;testnet6&quot;},&quot;public_key&quot;:{&quot;hex_bytes&quot;:&quot;6f8f4d77e94bce3900078b89319e6e25b341d47669a76ae4bf26677d377533f0&quot;,&quot;curve_type&quot;:&quot;edwards25519&quot;}}' | jq
</code></pre>
<ul>
<li><code>/construction/metadata</code> (<code>online</code> mode only)</li>
</ul>
<pre><code>$ curl -s --request POST 'http://localhost:3030/construction/metadata' \--header 'Accept: application/json' \--header 'Content-Type: application/json' \--data-raw '{&quot;network_identifier&quot;:{&quot;blockchain&quot;:&quot;iota&quot;,&quot;network&quot;:&quot;testnet6&quot;},&quot;options&quot;:{&quot;inputs&quot;:[&quot;4cad8ab0113e2fba1b9abb15d701c2d86dc100bda6a414b5f5de22f4809b45860100&quot;,&quot;8b64c69388ce190bd2c53c951b0ca899851f41bf580a031b4f253c302dc173420100&quot;]}}' | jq
</code></pre>
<ul>
<li><code>/construction/preprocess</code> (<code>offline</code> mode only)</li>
</ul>
<pre><code>$ curl --request POST 'http://localhost:3030/construction/preprocess' \--header 'Accept: application/json' \--header 'Content-Type: application/json' \--data-raw '{&quot;network_identifier&quot;:{&quot;blockchain&quot;:&quot;iota&quot;,&quot;network&quot;:&quot;testnet6&quot;},&quot;operations&quot;:[{&quot;operation_identifier&quot;:{&quot;index&quot;:0,&quot;network_index&quot;:1},&quot;related_operations&quot;:[],&quot;type&quot;:&quot;UTXO_INPUT&quot;,&quot;status&quot;:&quot;SUCCESS&quot;,&quot;account&quot;:{&quot;address&quot;:&quot;atoi1qz4u7jdqn6d2qjt5y7tauctckl77nt6qv69reuhm7pdc98weu6cl2qylcgr&quot;},&quot;amount&quot;:{&quot;value&quot;:&quot;999820000000&quot;,&quot;currency&quot;:{&quot;symbol&quot;:&quot;IOTA&quot;,&quot;decimals&quot;:0}},&quot;coin_change&quot;:{&quot;coin_identifier&quot;:{&quot;identifier&quot;:&quot;837f9646c7cc5e748099d3abb946302e44927c96c648bcc3dd0f693258a61e1b0100&quot;},&quot;coin_action&quot;:&quot;coin_spent&quot;},&quot;metadata&quot;:{&quot;is_spent&quot;:&quot;UTXO_UNSPENT&quot;}},{&quot;operation_identifier&quot;:{&quot;index&quot;:0,&quot;network_index&quot;:1},&quot;related_operations&quot;:[{&quot;index&quot;:1}],&quot;type&quot;:&quot;UTXO_OUTPUT&quot;,&quot;status&quot;:&quot;SUCCESS&quot;,&quot;account&quot;:{&quot;address&quot;:&quot;atoi1qzcts3mukxthlwg90u2e5nrhpqt566fghhxdga83grmy60kt2akx2q0de5u&quot;},&quot;amount&quot;:{&quot;value&quot;:&quot;10000000&quot;,&quot;currency&quot;:{&quot;symbol&quot;:&quot;IOTA&quot;,&quot;decimals&quot;:0}},&quot;coin_change&quot;:{&quot;coin_identifier&quot;:{&quot;identifier&quot;:&quot;331bfc6eb2a2e02d7b7b9ce7aede370d8b4f6db3236887c5615ae36c523b2f060100&quot;},&quot;coin_action&quot;:&quot;coin_created&quot;},&quot;metadata&quot;:{&quot;is_spent&quot;:&quot;UTXO_UNSPENT&quot;}},{&quot;operation_identifier&quot;:{&quot;index&quot;:1,&quot;network_index&quot;:0},&quot;related_operations&quot;:[{&quot;index&quot;:0}],&quot;type&quot;:&quot;UTXO_OUTPUT&quot;,&quot;status&quot;:&quot;SUCCESS&quot;,&quot;account&quot;:{&quot;address&quot;:&quot;atoi1qz4u7jdqn6d2qjt5y7tauctckl77nt6qv69reuhm7pdc98weu6cl2qylcgr&quot;},&quot;amount&quot;:{&quot;value&quot;:&quot;999810000000&quot;,&quot;currency&quot;:{&quot;symbol&quot;:&quot;IOTA&quot;,&quot;decimals&quot;:0}},&quot;coin_change&quot;:{&quot;coin_identifier&quot;:{&quot;identifier&quot;:&quot;331bfc6eb2a2e02d7b7b9ce7aede370d8b4f6db3236887c5615ae36c523b2f060000&quot;},&quot;coin_action&quot;:&quot;coin_created&quot;},&quot;metadata&quot;:{&quot;is_spent&quot;:&quot;UTXO_UNSPENT&quot;}}],&quot;metadata&quot;:{},&quot;public_keys&quot;:[{&quot;hex_bytes&quot;:&quot;3ada770dca2c802df6837df29bdd8cd6c6d9d72cc4041743c7942cc11e6834bd&quot;,&quot;curve_type&quot;:&quot;edwards25519&quot;}]}' | jq
</code></pre>
<ul>
<li><code>/construction/payloads</code> (<code>offline</code> mode only)</li>
</ul>
<pre><code>$ curl --request POST 'http://localhost:3030/construction/payloads' \--header 'Accept: application/json' \--header 'Content-Type: application/json' \--data-raw '{&quot;network_identifier&quot;:{&quot;blockchain&quot;:&quot;iota&quot;,&quot;network&quot;:&quot;testnet6&quot;},&quot;operations&quot;:[{&quot;operation_identifier&quot;:{&quot;index&quot;:0,&quot;network_index&quot;:1},&quot;related_operations&quot;:[],&quot;type&quot;:&quot;UTXO_INPUT&quot;,&quot;status&quot;:&quot;SUCCESS&quot;,&quot;account&quot;:{&quot;address&quot;:&quot;atoi1qzpgz6elgl3t9wvn05q87y2l5vpse86t4xxh7g3fg8kk9zc4r3wmymtmd46&quot;},&quot;amount&quot;:{&quot;value&quot;:&quot;10000000&quot;,&quot;currency&quot;:{&quot;symbol&quot;:&quot;IOTA&quot;,&quot;decimals&quot;:0}},&quot;coin_change&quot;:{&quot;coin_identifier&quot;:{&quot;identifier&quot;:&quot;18063ffd63b305f81a17f633a7340ea0441555c19a2ed3d702763f103d2c91a10000&quot;},&quot;coin_action&quot;:&quot;coin_spent&quot;},&quot;metadata&quot;:{&quot;is_spent&quot;:&quot;UTXO_UNSPENT&quot;}},{&quot;operation_identifier&quot;:{&quot;index&quot;:0,&quot;network_index&quot;:1},&quot;related_operations&quot;:[],&quot;type&quot;:&quot;UTXO_INPUT&quot;,&quot;status&quot;:&quot;SUCCESS&quot;,&quot;account&quot;:{&quot;address&quot;:&quot;atoi1qzpgz6elgl3t9wvn05q87y2l5vpse86t4xxh7g3fg8kk9zc4r3wmymtmd46&quot;},&quot;amount&quot;:{&quot;value&quot;:&quot;10000000&quot;,&quot;currency&quot;:{&quot;symbol&quot;:&quot;IOTA&quot;,&quot;decimals&quot;:0}},&quot;coin_change&quot;:{&quot;coin_identifier&quot;:{&quot;identifier&quot;:&quot;f504290ec9fad68987782e590e7201bf94776e0cea00bbd36a4253bbe536deda0000&quot;},&quot;coin_action&quot;:&quot;coin_spent&quot;},&quot;metadata&quot;:{&quot;is_spent&quot;:&quot;UTXO_UNSPENT&quot;}},{&quot;operation_identifier&quot;:{&quot;index&quot;:0,&quot;network_index&quot;:1},&quot;related_operations&quot;:[{&quot;index&quot;:1}],&quot;type&quot;:&quot;UTXO_OUTPUT&quot;,&quot;status&quot;:&quot;SUCCESS&quot;,&quot;account&quot;:{&quot;address&quot;:&quot;atoi1qq2hqdxds09ps7ge5pmczrpnaarllew2tmgcp648g40sdx8lg0vpzh0yvda&quot;},&quot;amount&quot;:{&quot;value&quot;:&quot;10000000&quot;,&quot;currency&quot;:{&quot;symbol&quot;:&quot;IOTA&quot;,&quot;decimals&quot;:0}},&quot;coin_change&quot;:{&quot;coin_identifier&quot;:{&quot;identifier&quot;:&quot;97dd9cb0cb873cf31a9ed6cbae111dc50760fca25012e9914201f8050bf734ac0000&quot;},&quot;coin_action&quot;:&quot;coin_created&quot;},&quot;metadata&quot;:{&quot;is_spent&quot;:&quot;UTXO_UNSPENT&quot;}},{&quot;operation_identifier&quot;:{&quot;index&quot;:1,&quot;network_index&quot;:0},&quot;related_operations&quot;:[{&quot;index&quot;:0}],&quot;type&quot;:&quot;UTXO_OUTPUT&quot;,&quot;status&quot;:&quot;SUCCESS&quot;,&quot;account&quot;:{&quot;address&quot;:&quot;atoi1qr5fk57dfqzcg64tvsm7xaeenarg376k0sc4zsjczwymvhtey2j9k853f2k&quot;},&quot;amount&quot;:{&quot;value&quot;:&quot;10000000&quot;,&quot;currency&quot;:{&quot;symbol&quot;:&quot;IOTA&quot;,&quot;decimals&quot;:0}},&quot;coin_change&quot;:{&quot;coin_identifier&quot;:{&quot;identifier&quot;:&quot;97dd9cb0cb873cf31a9ed6cbae111dc50760fca25012e9914201f8050bf734ac0100&quot;},&quot;coin_action&quot;:&quot;coin_created&quot;},&quot;metadata&quot;:{&quot;is_spent&quot;:&quot;UTXO_UNSPENT&quot;}}],&quot;metadata&quot;:{&quot;inputs_metadata&quot;:{&quot;18063ffd63b305f81a17f633a7340ea0441555c19a2ed3d702763f103d2c91a10000&quot;:{&quot;messageId&quot;:&quot;729f7d96a38b85aa6fe82663553681460eb5236c4729e8f8378ae3094de570c9&quot;,&quot;transactionId&quot;:&quot;18063ffd63b305f81a17f633a7340ea0441555c19a2ed3d702763f103d2c91a1&quot;,&quot;outputIndex&quot;:0,&quot;isSpent&quot;:true,&quot;output&quot;:{&quot;type&quot;:0,&quot;address&quot;:{&quot;type&quot;:0,&quot;address&quot;:&quot;82816b3f47e2b2b9937d007f115fa3030c9f4ba98d7f222941ed628b151c5db2&quot;},&quot;amount&quot;:10000000}},&quot;f504290ec9fad68987782e590e7201bf94776e0cea00bbd36a4253bbe536deda0000&quot;:{&quot;messageId&quot;:&quot;6bf253a0d0b352ea5b4506233f0a7792e43f118b874252e242d6ddaa89f185cc&quot;,&quot;transactionId&quot;:&quot;f504290ec9fad68987782e590e7201bf94776e0cea00bbd36a4253bbe536deda&quot;,&quot;outputIndex&quot;:0,&quot;isSpent&quot;:true,&quot;output&quot;:{&quot;type&quot;:0,&quot;address&quot;:{&quot;type&quot;:0,&quot;address&quot;:&quot;82816b3f47e2b2b9937d007f115fa3030c9f4ba98d7f222941ed628b151c5db2&quot;},&quot;amount&quot;:10000000}}}}}' | jq
</code></pre>
<ul>
<li><code>/construction/parse</code> (<code>offline</code> mode only)</li>
</ul>
<pre><code>$ curl --request POST 'http://localhost:3030/construction/parse' \--header 'Accept: application/json' \--header 'Content-Type: application/json' \--data-raw '{&quot;network_identifier&quot;:{&quot;blockchain&quot;:&quot;iota&quot;,&quot;network&quot;:&quot;testnet6&quot;},&quot;signed&quot;:false,&quot;transaction&quot;:&quot;7b22657373656e6365223a7b2274797065223a22526567756c6172222c2264617461223a7b22696e70757473223a5b7b2274797065223a225554584f222c2264617461223a223138303633666664363362333035663831613137663633336137333430656130343431353535633139613265643364373032373633663130336432633931613130303030227d2c7b2274797065223a225554584f222c2264617461223a226635303432393065633966616436383938373738326535393065373230316266393437373665306365613030626264333661343235336262653533366465646130303030227d5d2c226f757470757473223a5b7b2274797065223a225369676e61747572654c6f636b656453696e676c65222c2264617461223a7b2261646472657373223a7b2274797065223a2245643235353139222c2264617461223a2231353730333463643833636131383739313961303737383130633333656634376666653563613565643138306561613734353566303639386666343364383131227d2c22616d6f756e74223a31303030303030307d7d2c7b2274797065223a225369676e61747572654c6f636b656453696e676c65222c2264617461223a7b2261646472657373223a7b2274797065223a2245643235353139222c2264617461223a2265383962353363643438303538343661616236343337653337373339396634363838666235363763333135313432353831333839623635643739323261343562227d2c22616d6f756e74223a31303030303030307d7d5d2c227061796c6f6164223a6e756c6c7d7d2c22696e707574735f6d65746164617461223a7b223138303633666664363362333035663831613137663633336137333430656130343431353535633139613265643364373032373633663130336432633931613130303030223a7b226d6573736167654964223a2237323966376439366133386238356161366665383236363335353336383134363065623532333663343732396538663833373861653330393464653537306339222c227472616e73616374696f6e4964223a2231383036336666643633623330356638316131376636333361373334306561303434313535356331396132656433643730323736336631303364326339316131222c226f7574707574496e646578223a302c2269735370656e74223a747275652c226f7574707574223a7b2274797065223a302c2261646472657373223a7b2274797065223a302c2261646472657373223a2238323831366233663437653262326239393337643030376631313566613330333063396634626139386437663232323934316564363238623135316335646232227d2c22616d6f756e74223a31303030303030307d7d2c226635303432393065633966616436383938373738326535393065373230316266393437373665306365613030626264333661343235336262653533366465646130303030223a7b226d6573736167654964223a2236626632353361306430623335326561356234353036323333663061373739326534336631313862383734323532653234326436646461613839663138356363222c227472616e73616374696f6e4964223a2266353034323930656339666164363839383737383265353930653732303162663934373736653063656130306262643336613432353362626535333664656461222c226f7574707574496e646578223a302c2269735370656e74223a747275652c226f7574707574223a7b2274797065223a302c2261646472657373223a7b2274797065223a302c2261646472657373223a2238323831366233663437653262326239393337643030376631313566613330333063396634626139386437663232323934316564363238623135316335646232227d2c22616d6f756e74223a31303030303030307d7d7d7d&quot;}' | jq
</code></pre>
<ul>
<li><code>/construction/combine</code> (<code>offline</code> mode only)</li>
</ul>
<pre><code>$ curl --request POST 'http://localhost:3030/construction/combine' \--header 'Accept: application/json' \--header 'Content-Type: application/json' \--data-raw '{&quot;network_identifier&quot;:{&quot;blockchain&quot;:&quot;iota&quot;,&quot;network&quot;:&quot;testnet6&quot;},&quot;unsigned_transaction&quot;:&quot;0001000063aa5b2476105ad4ebbb995968216cef0d940791d900afd1180a8df4e527b3460000010000005eec99d6ee4ba21aa536c3364bbf2b587cb98a7f2565b75d948b10083e2143f8050000000000000000000000&quot;,&quot;signatures&quot;:[{&quot;signing_payload&quot;:{&quot;account_identifier&quot;:{&quot;address&quot;:&quot;ae98475c63cfebc918b57193a4183f4374f67974971aff9034699793d331d7de&quot;},&quot;hex_bytes&quot;:&quot;c8be532dd8f351c28b6cdb7903d076b356129189d11ad50c46feb25ca472b984&quot;,&quot;signature_type&quot;:&quot;ed25519&quot;},&quot;public_key&quot;:{&quot;hex_bytes&quot;:&quot;b7a3c12dc0c8c748ab07525b701122b88bd78f600c76342d27f25e5f92444cde&quot;,&quot;curve_type&quot;:&quot;edwards25519&quot;},&quot;signature_type&quot;:&quot;ed25519&quot;,&quot;hex_bytes&quot;:&quot;59057634a166d84edebb88ab17a33394c0ccf1d46adffc3a0095c0f5e7e9dbe766ab05cb0244486d272e61f1e09db1bdb6e4fbb3a0398013415769e484606a02&quot;}]}' | jq
</code></pre>
<h1 id="api-reference"><a class="header" href="#api-reference">API Reference</a></h1>
<h1 id="utils"><a class="header" href="#utils">Utils</a></h1>
<p>A subcrate called <code>utils</code> provides extra tools to help automation of <code>rosetta-cli</code> checks.</p>
<h2 id="faucet"><a class="header" href="#faucet">Faucet</a></h2>
<p>Interacts with the testnet Faucet to make sure that a prefunded account can be used during <code>check:construction</code>.</p>
<h2 id="snapshot"><a class="header" href="#snapshot">Snapshot</a></h2>
<p>Fetches a snapshot to be used to create a <code>bootstrap_balances.json</code> file with the balances of every single address in the ledger. Used when running <code>check:data</code> with pruning enabled.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
